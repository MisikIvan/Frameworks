<h1>Students</h1>

<form method="get" class="mb-3">
    <input type="text" name="name" value="{{ app.request.get('name') }}" placeholder="Name">
    <input type="text" name="email" value="{{ app.request.get('email') }}" placeholder="Email">
    <input type="date" name="birthDate" value="{{ app.request.get('birthDate') }}" placeholder="Birth date">
    <input type="text" name="department" value="{{ app.request.get('department') }}" placeholder="Department">

    <label>
        Items per page:
        <select name="itemsPerPage" onchange="this.form.submit()">
            <option value="5" {{ itemsPerPage == 5 ? 'selected' : '' }}>5</option>
            <option value="10" {{ itemsPerPage == 10 ? 'selected' : '' }}>10</option>
            <option value="20" {{ itemsPerPage == 20 ? 'selected' : '' }}>20</option>
        </select>
    </label>

    <button type="submit">Filter</button>
</form>

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Birth Date</th>
            <th>Department</th>
        </tr>
    </thead>
    <tbody>
        {% for student in pagination %}
            <tr>
                <td>{{ student.name }}</td>
                <td>{{ student.email }}</td>
                <td>{{ student.birthDate ? student.birthDate|date('Y-m-d') : '' }}</td>
                <td>{{ student.department.name }}</td>
            </tr>
        {% else %}
            <tr><td colspan="4">No students found.</td></tr>
        {% endfor %}
    </tbody>
</table>

{{ knp_pagination_render(pagination) }}
